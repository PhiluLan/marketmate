import{u as E,r as i,o as O,a as b,c as l,b as e,d as u,t as r,e as D,F as K,f as S,w as F,v as N,g as V,h as o}from"./index-DX0IeYG1.js";const z={class:"max-w-4xl mx-auto p-4"},B={class:"text-2xl mb-2"},C={key:0},M={key:1,class:"text-red-600"},T={key:2},$={class:"bg-white p-4 rounded shadow mb-4"},I={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},P={key:0,class:"text-gray-500"},R={class:"flex gap-2 mb-2"},U=["disabled"],j=["disabled"],q={key:0,class:"text-gray-500"},Q={__name:"SEODetail",setup(G){const c=E().params.id,w=i(!0),t=i(null),v=i(null);O(async()=>{try{const n=await b.get(`/seo/detail/?website_id=${c}`);t.value=n.data}catch{v.value="Fehler beim Laden der SEO-Details"}finally{w.value=!1}});const L=async()=>{try{await b.post("/seo/audit/run/",{website_id:c}),window.location.reload()}catch{alert("Audit konnte nicht gestartet werden.")}},d=i(""),y=i(!1),p=async()=>{if(d.value.trim()){y.value=!0;try{await b.post("/keywords/",{website:c,term:d.value,region:"de"}),d.value="",await A()}catch{alert("Keyword konnte nicht gespeichert werden.")}finally{y.value=!1}}};async function A(){try{const n=await b.get(`/seo/detail/?website_id=${c}`);t.value=n.data}catch{v.value="Fehler beim Laden der SEO-Details"}}return(n,s)=>{var g,_,h,m,x,f,k;return o(),l("div",z,[e("h1",B," SEO-Detail: "+r(((_=(g=t.value)==null?void 0:g.website)==null?void 0:_.name)||((m=(h=t.value)==null?void 0:h.website)==null?void 0:m.url)||""),1),w.value?(o(),l("div",C,"Lade Daten...")):u("",!0),v.value?(o(),l("div",M,r(v.value),1)):u("",!0),t.value?(o(),l("div",T,[e("div",$,[e("p",null,[s[1]||(s[1]=e("strong",null,"Domain:",-1)),D(" "+r(t.value.website.url),1)]),e("p",null,[s[2]||(s[2]=e("strong",null,"Letzter Audit:",-1)),D(" "+r((f=(x=t.value.audits)==null?void 0:x[0])!=null&&f.created_at?new Date(t.value.audits[0].created_at).toLocaleString():"—"),1)]),e("button",{onClick:L,class:"mt-2 px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700"},"SEO-Audit starten")]),e("div",I,[e("div",null,[s[3]||(s[3]=e("h2",{class:"font-semibold mb-2"},"Letzte Audits",-1)),e("ul",null,[((k=t.value.audits)==null?void 0:k.length)===0?(o(),l("li",P,"Keine Audits vorhanden.")):u("",!0),(o(!0),l(K,null,S(t.value.audits,a=>(o(),l("li",{key:a.id,class:"border-b py-2"},r(new Date(a.created_at).toLocaleString())+" – Score: "+r(a.seo_score??a.score??"-"),1))),128))])]),e("div",null,[s[4]||(s[4]=e("h2",{class:"font-semibold mb-2"},"Aktuelle Keywords",-1)),e("div",R,[F(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>d.value=a),placeholder:"Neues Keyword eingeben",class:"border px-2 py-1 rounded flex-1",disabled:y.value,onKeyup:V(p,["enter"])},null,40,U),[[N,d.value]]),e("button",{onClick:p,class:"bg-blue-600 text-white px-3 py-1 rounded",disabled:y.value},"Speichern",8,j)]),e("ul",null,[!t.value.keywords||t.value.keywords.length===0?(o(),l("li",q,"Keine Keywords erfasst.")):u("",!0),(o(!0),l(K,null,S(t.value.keywords,a=>(o(),l("li",{key:a.id,class:"border-b py-2"},r(a.term)+": Platz "+r(a.rank??"-"),1))),128))])])])])):u("",!0)])}}};export{Q as default};
